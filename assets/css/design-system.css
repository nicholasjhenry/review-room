/*
  ReviewRoom Design System (Spec 003 â€“ Phase 2)
  ---------------------------------------------------------------------------
  This stylesheet captures the canonical Tailwind v4 + DaisyUI extension that
  powers the redesigned snippet experience. Tokens mirror the data exposed
  via `ReviewRoomWeb.Components.DesignSystem.Tokens` so Elixir components,
  CSS, and tests remain in lockstep.

  Section Index
  1. Token declarations (@theme) for color, typography, spacing, radius, shadow, motion.
  2. DaisyUI + global theme overrides (light/dark, focus, reduced motion).
  3. Component primitives and future-ready scaffolding.
  4. Accessibility utilities (reduced motion helpers, outline management).
*/

@layer base {
    /* ----------------------------------------------------------------------- */
    /* 1. Token catalogue                                                      */
    /* ----------------------------------------------------------------------- */
    @theme {
        /* Palette */
        --rr-color-primary: oklch(64% 0.2 278);
        --rr-color-primary-soft: oklch(88% 0.04 278);
        --rr-color-accent: oklch(71% 0.16 38);
        --rr-color-surface: oklch(97% 0.01 255);
        --rr-color-surface-high: oklch(91% 0.02 255);
        --rr-color-surface-inverse: oklch(21% 0.01 258);
        --rr-color-backdrop: oklch(16% 0.01 258);
        --rr-color-info: oklch(68% 0.15 231);
        --rr-color-success: oklch(69% 0.12 166);
        --rr-color-warning: oklch(76% 0.14 75);
        --rr-color-danger: oklch(57% 0.22 25);
        --rr-color-text-primary: oklch(18% 0.01 262);
        --rr-color-text-secondary: oklch(42% 0.02 262);

        /* Typography */
        --rr-font-sans: "Inter", "Helvetica Neue", "Segoe UI", system-ui, sans-serif;
        --rr-font-display: "Satoshi", "Inter", "Helvetica Neue", system-ui, sans-serif;
        --rr-font-mono: "Fira Code", "SFMono-Regular", "Menlo", monospace;

        /* Spacing (4px increments, expressed in rem) */
        --rr-space-0: 0;
        --rr-space-1: 0.25rem;
        --rr-space-2: 0.5rem;
        --rr-space-3: 0.75rem;
        --rr-space-4: 1rem;
        --rr-space-5: 1.25rem;
        --rr-space-6: 1.5rem;
        --rr-space-7: 1.75rem;
        --rr-space-8: 2rem;
        --rr-space-9: 2.25rem;
        --rr-space-10: 2.5rem;
        --rr-space-11: 2.75rem;
        --rr-space-12: 3rem;

        /* Radii */
        --rr-radius-xs: 0.25rem;
        --rr-radius-sm: 0.375rem;
        --rr-radius-md: 0.625rem;
        --rr-radius-lg: 0.875rem;
        --rr-radius-xl: 1.25rem;
        --rr-radius-pill: 999px;

        /* Shadows */
        --rr-shadow-subtle: 0 1px 2px rgba(15, 23, 42, 0.04);
        --rr-shadow-soft: 0 12px 40px -24px rgba(15, 23, 42, 0.45);
        --rr-shadow-focus: 0 0 0 3px color-mix(in oklch, var(--rr-color-primary) 28%, transparent);
        --rr-shadow-inset:
            inset 0 1px 0 rgba(255, 255, 255, 0.18), inset 0 -1px 0 rgba(15, 23, 42, 0.08);

        /* Motion */
        --rr-motion-fast-duration: 150ms;
        --rr-motion-fast-easing: cubic-bezier(0.4, 1, 0.6, 1);
        --rr-motion-standard-duration: 200ms;
        --rr-motion-standard-easing: cubic-bezier(0.34, 1.56, 0.64, 1);
        --rr-motion-emphasis-duration: 260ms;
        --rr-motion-emphasis-easing: cubic-bezier(0.24, 1, 0.32, 1);
    }

    :root {
        color-scheme: light;
        font-family: var(--rr-font-sans);
        --rr-radius-field: var(--rr-radius-sm);
        --rr-radius-card: var(--rr-radius-lg);
        --rr-radius-selector: var(--rr-radius-xs);
        --rr-shadow-elevation: var(--rr-shadow-soft);

        /* DaisyUI contract */
        --rounded-box: var(--rr-radius-lg);
        --rounded-btn: var(--rr-radius-md);
        --rounded-badge: var(--rr-radius-pill);
        --animation-btn: var(--rr-motion-fast-duration);
        --animation-input: var(--rr-motion-standard-duration);
        --btn-text-case: none;
        --btn-focus-scale: 0.99;
        --border-btn: 1px;
        --tab-border: 1px;
        --tab-radius: var(--rr-radius-md);
    }

    :root,
    [data-theme="reviewroom-light"] {
        --color-base-100: var(--rr-color-surface);
        --color-base-200: var(--rr-color-surface-high);
        --color-base-300: color-mix(in oklch, var(--rr-color-surface) 80%, black);
        --color-base-content: var(--rr-color-text-primary);

        --color-primary: var(--rr-color-primary);
        --color-primary-content: oklch(97% 0.02 275);

        --color-secondary: var(--rr-color-accent);
        --color-secondary-content: oklch(99% 0.01 52);

        --color-accent: var(--rr-color-info);
        --color-accent-content: oklch(99% 0.008 240);

        --color-neutral: var(--rr-color-text-primary);
        --color-neutral-content: var(--rr-color-surface);

        --color-info: var(--rr-color-info);
        --color-info-content: oklch(97% 0.012 232);

        --color-success: var(--rr-color-success);
        --color-success-content: oklch(98% 0.012 170);

        --color-warning: var(--rr-color-warning);
        --color-warning-content: oklch(99% 0.02 90);

        --color-error: var(--rr-color-danger);
        --color-error-content: oklch(96% 0.015 20);

        background-color: var(--rr-color-surface);
        color: var(--rr-color-text-primary);
    }

    [data-theme="reviewroom-dark"] {
        color-scheme: dark;
        --color-base-100: oklch(29% 0.015 262);
        --color-base-200: oklch(24% 0.013 262);
        --color-base-300: oklch(17% 0.01 262);
        --color-base-content: oklch(96% 0.012 262);

        --color-primary: oklch(75% 0.18 278);
        --color-primary-content: oklch(16% 0.008 262);

        --color-secondary: oklch(74% 0.15 56);
        --color-secondary-content: oklch(18% 0.01 262);

        --color-accent: oklch(70% 0.18 230);
        --color-accent-content: oklch(14% 0.006 260);

        --color-neutral: oklch(55% 0.03 260);
        --color-neutral-content: oklch(95% 0.01 256);

        --color-info: oklch(70% 0.17 236);
        --color-info-content: oklch(15% 0.01 260);

        --color-success: oklch(72% 0.11 172);
        --color-success-content: oklch(14% 0.005 152);

        --color-warning: oklch(79% 0.15 80);
        --color-warning-content: oklch(18% 0.01 262);

        --color-error: oklch(67% 0.19 23);
        --color-error-content: oklch(16% 0.009 262);

        --rr-shadow-elevation: 0 24px 60px -30px rgba(0, 0, 0, 0.6);
        background-color: oklch(24% 0.011 258);
        color: oklch(95% 0.01 256);
    }

    body {
        font-family: var(--rr-font-sans);
        background-color: var(--color-base-100);
    }

    .font-display {
        font-family: var(--rr-font-display);
        letter-spacing: -0.04em;
    }
}

@layer components {
    /* ----------------------------------------------------------------------- */
    /* 3. Component scaffolding                                                */
    /* ----------------------------------------------------------------------- */

    .ds-card {
        border-radius: var(--rr-radius-card);
        background-color: var(--color-base-100);
        box-shadow: var(--rr-shadow-subtle);
        transition:
            transform var(--rr-motion-fast-duration) var(--rr-motion-fast-easing),
            box-shadow var(--rr-motion-standard-duration) var(--rr-motion-standard-easing);
    }

    .ds-card:hover,
    .ds-card:focus-visible {
        transform: translateY(-2px);
        box-shadow: var(--rr-shadow-elevation);
    }

    .ds-focus-ring {
        outline: none;
        box-shadow: var(--rr-shadow-focus);
    }

    .ds-glass {
        background-color: color-mix(in oklch, var(--color-base-100) 75%, transparent);
        backdrop-filter: blur(18px);
    }
}

@layer utilities {
    /* ----------------------------------------------------------------------- */
    /* 4. Accessibility & motion helpers                                       */
    /* ----------------------------------------------------------------------- */

    .motion-duration-fast {
        transition-duration: var(--rr-motion-fast-duration);
    }

    .motion-duration-standard {
        transition-duration: var(--rr-motion-standard-duration);
    }

    .motion-ease-standard {
        transition-timing-function: var(--rr-motion-standard-easing);
    }

    .motion-ease-emphasis {
        transition-timing-function: var(--rr-motion-emphasis-easing);
    }

    @media (prefers-reduced-motion: reduce) {
        .motion-safe-transition {
            transition-duration: 40ms !important;
            animation-duration: 40ms !important;
        }
    }
}
